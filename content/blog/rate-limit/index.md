---
title: 详解几种常见限流算法及限流器设计
date: 2025-02-01T10:30:31+08:00
tags: [`限流`]
series: []
featured: true
---

在服务端开发中，限流（Rate Limiting）是一种常见的技术，用于控制请求的流量，防止请求过多导致服务器压力过大或响应时间过长。限流算法有很多种，本文将介绍主要的几种常见限流算法及限流器设计。

<!--more-->

## 限流场景

在实际开发过程中，我们需要考虑一些需要限流的场景。比如防止突发流量激增导致服务崩溃，或者防止恶意请求导致服务器资源占用过多，又或者某些业务场景下我们需要限制用户的请求频率。

衡量请求频率的指标主要有两种：

TPS: 每秒事务数（Transaction Per Second）

TPS代表每秒事务数，是衡量系统处理能力的一个指标。事务通常指的是一组操作的集合，可能包括多个数据库操作、消息队列处理等。在许多情况下，TPS用于衡量数据库系统或应用程序在特定负载下的性能。

QPS: 每秒查询数（Query Per Second）

QPS代表每秒查询数，是衡量系统查询能力的一个指标。查询通常指的是数据库查询操作，包括SELECT、INSERT、UPDATE、DELETE等。在许多情况下，QPS用于衡量数据库系统或应用程序的查询性能。

在某些系统中，一个事务可能包含多个查询，因此在这些情况下，TPS和QPS之间可以有一定的关系。例如，一个事务包含三个查询，那么在理想情况下，QPS可能是TPS的三倍。

## 限流算法